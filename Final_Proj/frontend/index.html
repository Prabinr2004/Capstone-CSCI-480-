<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öΩ Sports Fan Engagement App</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <!-- Login Screen (shown first) -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <div class="login-card">
                <h1>‚öΩ Sports Fan App</h1>
                <p class="subtitle">Where Fans Compete & Earn Rewards</p>
                
                <div class="form-group">
                    <input 
                        type="text" 
                        id="username-input" 
                        placeholder="Enter your name"
                        class="input-field"
                    >
                </div>

                <div class="form-group">
                    <label>Choose Your Favorite Team:</label>
                    <select id="team-input" class="input-field">
                        <option value="">-- Select a Team --</option>
                        <!-- Teams will be loaded dynamically -->
                    </select>
                </div>

                <button class="btn btn-large btn-primary" onclick="handleLogin()">
                    Enter the Arena üöÄ
                </button>

                <p class="login-note">First time? We'll create your profile.</p>
            </div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="main-screen" class="screen">
        <!-- Top Header with User Info -->
        <header class="app-header">
            <div class="header-left">
                <h1>‚öΩ Sports Fan Arena</h1>
            </div>
            <div class="header-center">
                <div class="user-badge">
                    <span id="header-username" class="user-name">Welcome!</span>
                    <span id="header-team" class="user-team">‚Äî</span>
                    <button class="btn-text" onclick="switchTeam()">Change Team</button>
                </div>
            </div>
            <div class="header-right">
                <div class="points-display">
                    <span class="points-label">Points</span>
                    <span id="header-points" class="points-value">0</span>
                </div>
                <button class="btn btn-small btn-secondary" onclick="handleLogout()">Logout</button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="app-main">
            <!-- Navigation Sidebar -->
            <nav class="sidebar">
                <div class="nav-section">
                    <h3>Navigation</h3>
                    <button 
                        class="nav-btn active" 
                        onclick="switchView('dashboard')" 
                        data-view="dashboard"
                    >
                        üìä Dashboard
                    </button>
                    <button 
                        class="nav-btn" 
                        onclick="switchView('quiz')" 
                        data-view="quiz"
                    >
                        üéØ Take Quiz
                    </button>
                    <button 
                        class="nav-btn" 
                        onclick="switchView('predictions')" 
                        data-view="predictions"
                    >
                        üîÆ Predictions
                    </button>
                    <button 
                        class="nav-btn" 
                        onclick="switchView('chat')" 
                        data-view="chat"
                    >
                        üí¨ Chat
                    </button>
                    <button 
                        class="nav-btn" 
                        onclick="switchView('leaderboard')" 
                        data-view="leaderboard"
                    >
                        üèÜ Leaderboard
                    </button>
                </div>

                <div class="nav-section">
                    <h3>Quick Stats</h3>
                    <div class="stat-bar">
                        <div class="stat-item">
                            <span class="stat-icon">üéØ</span>
                            <span class="stat-label">Quizzes</span>
                            <span id="quick-quiz-count" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üîÆ</span>
                            <span class="stat-label">Predictions</span>
                            <span id="quick-pred-count" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üéñÔ∏è</span>
                            <span class="stat-label">Badges</span>
                            <span id="quick-badge-count" class="stat-value">0</span>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard View -->
                <section id="dashboard-view" class="view active">
                    <div class="welcome-banner">
                        <h2 id="welcome-message">Welcome back! üéâ</h2>
                        <p id="welcome-subtitle">Ready to test your sports knowledge?</p>
                    </div>

                    <div class="action-cards">
                        <div class="card card-action" onclick="switchView('quiz')">
                            <div class="card-icon">üéØ</div>
                            <div class="card-title">Take Quiz</div>
                            <div class="card-desc">Test your knowledge and earn points</div>
                            <div class="card-cta">Start Now ‚Üí</div>
                        </div>

                        <div class="card card-action" onclick="switchView('predictions')">
                            <div class="card-icon">üîÆ</div>
                            <div class="card-title">Make Prediction</div>
                            <div class="card-desc">Predict game outcomes and win rewards</div>
                            <div class="card-cta">Predict Now ‚Üí</div>
                        </div>

                        <div class="card card-action" onclick="switchView('chat')">
                            <div class="card-icon">üí¨</div>
                            <div class="card-title">Chat with AI</div>
                            <div class="card-desc">Talk about teams, players, and more</div>
                            <div class="card-cta">Chat Now ‚Üí</div>
                        </div>

                        <div class="card card-action" onclick="switchView('leaderboard')">
                            <div class="card-icon">üèÜ</div>
                            <div class="card-title">Leaderboard</div>
                            <div class="card-desc">See where you rank against others</div>
                            <div class="card-cta">View Rankings ‚Üí</div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <!-- Quiz Section -->
                        <div class="card dashboard-card">
                            <div class="card-header">
                                <h3>üéØ Quiz Progress</h3>
                            </div>
                            <div id="quiz-dashboard" class="card-content">
                                <p class="empty-state">No quizzes taken yet</p>
                            </div>
                        </div>

                        <!-- Predictions Section -->
                        <div class="card dashboard-card">
                            <div class="card-header">
                                <h3>üîÆ Recent Predictions</h3>
                            </div>
                            <div id="predictions-dashboard" class="card-content">
                                <p class="empty-state">No predictions made yet</p>
                            </div>
                        </div>

                        <!-- Achievements Section -->
                        <div class="card dashboard-card full-width">
                            <div class="card-header">
                                <h3>üéñÔ∏è Your Achievements</h3>
                            </div>
                            <div id="achievements-dashboard" class="card-content">
                                <div class="badge-grid">
                                    <div class="badge locked">
                                        <div class="badge-icon">ü•â</div>
                                        <div class="badge-name">Bronze</div>
                                    </div>
                                    <div class="badge locked">
                                        <div class="badge-icon">ü•à</div>
                                        <div class="badge-name">Silver</div>
                                    </div>
                                    <div class="badge locked">
                                        <div class="badge-icon">ü•á</div>
                                        <div class="badge-name">Gold</div>
                                    </div>
                                    <div class="badge locked">
                                        <div class="badge-icon">üíé</div>
                                        <div class="badge-name">Platinum</div>
                                    </div>
                                    <div class="badge locked">
                                        <div class="badge-icon">üí†</div>
                                        <div class="badge-name">Diamond</div>
                                    </div>
                                    <div class="badge locked">
                                        <div class="badge-icon">üëë</div>
                                        <div class="badge-name">Crown</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Quiz View -->
                <section id="quiz-view" class="view">
                    <div class="section-header">
                        <h2>üéØ Take a Quiz</h2>
                        <p>Choose a team and test your knowledge</p>
                    </div>

                    <div class="quiz-container">
                        <div id="quiz-selection" class="quiz-selection">
                            <!-- Team selection will be shown here -->
                        </div>

                        <div id="quiz-display" class="quiz-display hidden">
                            <!-- Quiz questions will be shown here -->
                        </div>

                        <div id="quiz-results" class="quiz-results hidden">
                            <!-- Quiz results will be shown here -->
                        </div>
                    </div>
                </section>

                <!-- Predictions View -->
                <section id="predictions-view" class="view">
                    <div class="section-header">
                        <h2>üîÆ Make Predictions</h2>
                        <p>Predict game outcomes and earn rewards</p>
                    </div>

                    <div class="predictions-container">
                        <!-- Prediction Form Section -->
                        <div class="prediction-form-section">
                            <h3>Create a Prediction</h3>
                            
                            <!-- Sport Selection -->
                            <div class="form-group">
                                <label>Select Sport:</label>
                                <div class="sport-buttons">
                                    <button class="sport-btn active" onclick="selectSport('soccer')">‚öΩ Soccer</button>
                                    <button class="sport-btn" onclick="selectSport('nba')">üèÄ NBA</button>
                                    <button class="sport-btn" onclick="selectSport('nfl')">üèà NFL</button>
                                </div>
                            </div>
                            
                            <!-- Team Selection -->
                            <div class="form-group">
                                <label>Team 1:</label>
                                <select id="team1-select" class="input-field">
                                    <option value="">-- Select Team 1 --</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Team 2:</label>
                                <select id="team2-select" class="input-field">
                                    <option value="">-- Select Team 2 --</option>
                                </select>
                            </div>
                            
                            <!-- Prediction Selection -->
                            <div class="form-group">
                                <label>Your Prediction:</label>
                                <div id="prediction-options" class="prediction-options">
                                    <button class="pred-btn" onclick="selectPrediction('team1')">
                                        <span id="team1-name">Team 1</span> Wins
                                    </button>
                                    <button class="pred-btn" id="draw-btn" onclick="selectPrediction('draw')" style="display:none;">
                                        Draw
                                    </button>
                                    <button class="pred-btn" onclick="selectPrediction('team2')">
                                        <span id="team2-name">Team 2</span> Wins
                                    </button>
                                </div>
                                <input type="hidden" id="selected-prediction" value="">
                            </div>
                            
                            <button class="btn btn-primary btn-large" onclick="submitPrediction()" id="submit-pred-btn" disabled>
                                Submit Prediction
                            </button>
                        </div>
                        
                        <!-- Prediction Result Section -->
                        <div id="prediction-result" class="prediction-result" style="display:none;">
                            <div class="result-card">
                                <h3>Prediction Result</h3>
                                <div class="result-content">
                                    <p><strong>Your Prediction:</strong> <span id="result-user-pred">‚Äî</span></p>
                                    <p><strong>System Outcome:</strong> <span id="result-system-pred">‚Äî</span></p>
                                    <p><strong>Result:</strong> <span id="result-status">‚Äî</span></p>
                                    <p><strong>Points Earned:</strong> <span id="result-points">0</span> üéØ</p>
                                    <p><strong>Explanation:</strong> <span id="result-explanation">‚Äî</span></p>
                                </div>
                                <button class="btn btn-secondary" onclick="resetPredictionForm()">
                                    Make Another Prediction
                                </button>
                            </div>
                        </div>
                        
                        <!-- Prediction History Section -->
                        <div class="prediction-history-section">
                            <h3>Your Prediction History</h3>
                            <div id="predictions-list" class="predictions-list">
                                <p class="placeholder">No predictions yet. Make your first prediction!</p>
                            </div>
                            <button class="btn btn-secondary" onclick="loadPredictionHistory()">
                                Refresh History
                            </button>
                        </div>
                        
                        <!-- Prediction Stats Section -->
                        <div class="prediction-stats-section">
                            <h3>Your Statistics</h3>
                            <div id="prediction-stats" class="stats-grid">
                                <div class="stat-card">
                                    <p class="stat-label">Total Predictions</p>
                                    <p class="stat-value" id="stat-total">0</p>
                                </div>
                                <div class="stat-card">
                                    <p class="stat-label">Correct Predictions</p>
                                    <p class="stat-value" id="stat-correct">0</p>
                                </div>
                                <div class="stat-card">
                                    <p class="stat-label">Accuracy</p>
                                    <p class="stat-value" id="stat-accuracy">0%</p>
                                </div>
                                <div class="stat-card">
                                    <p class="stat-label">Points Earned</p>
                                    <p class="stat-value" id="stat-points">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Chat View -->
                <section id="chat-view" class="view">
                    <div class="section-header">
                        <h2>üí¨ Chat with AI</h2>
                        <p>Ask about teams, players, stats, and more</p>
                    </div>

                    <div class="chat-container">
                        <div id="chat-messages" class="chat-messages">
                            <div class="chat-message assistant">
                                <div class="message-bubble">
                                    <p>üëã Hey there! I'm your AI Sports Buddy. Ask me anything about your favorite teams and players!</p>
                                </div>
                            </div>
                        </div>

                        <div class="chat-input-area">
                            <input 
                                type="text" 
                                id="chat-input" 
                                placeholder="Ask me about teams, players, stats..."
                                class="chat-input"
                                onkeypress="handleChatKeyPress(event)"
                            >
                            <button class="btn btn-send" onclick="sendChatMessage()">Send</button>
                        </div>
                    </div>
                </section>

                <!-- Leaderboard View -->
                <section id="leaderboard-view" class="view">
                    <div class="section-header">
                        <h2>üèÜ Global Leaderboard</h2>
                        <p>Compete with fans worldwide</p>
                    </div>

                    <div class="leaderboard-container">
                        <div id="leaderboard-content" class="leaderboard-table">
                            <div class="leaderboard-header">
                                <div class="rank">Rank</div>
                                <div class="name">User</div>
                                <div class="team">Team</div>
                                <div class="points">Points</div>
                                <div class="badges">Badges</div>
                            </div>
                            <div id="leaderboard-list" class="leaderboard-rows">
                                <p class="loading">Loading...</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Team Selection Modal -->
    <div id="team-modal" class="modal hidden">
        <div class="modal-content">
            <span class="modal-close" onclick="closeTeamModal()">&times;</span>
            <h2>üéØ Choose Your Team</h2>
            <div id="team-selection-modal" class="team-grid">
                <!-- Teams will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Questions Exhausted Modal -->
    <div id="exhausted-modal" class="modal hidden">
        <div class="modal-content exhausted-modal">
            <h2>üéâ Congratulations!</h2>
            <p id="exhausted-message">You've completed all available questions for this team.</p>
            <div class="exhausted-actions">
                <button class="btn btn-primary" onclick="resetQuestionPool()">
                    üîÑ Reset Question Pool
                </button>
                <button class="btn btn-secondary" onclick="closeExhaustedModal()">
                    Return to Dashboard
                </button>
            </div>
            <p class="exhausted-info" id="exhausted-info"></p>
        </div>
    </div>

    <script src="/static/script.js?v=2"></script>
</body>
</html>
